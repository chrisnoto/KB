lxc配置代理
lxc config set core.proxy_http http://h7108579:pqhkr99ctw@10.36.6.66:3128
lxc config set core.proxy_https http://h7108579:pqhkr99ctw@10.36.6.66:3128


配置remote lxd server
lxc is a client, and can manage any LXD server (a remote) that you have configured.
To see the list of currently available servers, run the following

lxc remote list
The one called local (default), is your local LXD server. The others, such as ubuntu: and images: are repositories of container and VM images. Those two only serve images and are read-only.

What you can do, is

configure your remote LXD server to be accessible remotely over the network
configure your local lxc client to be able to also manage that remote LXD server of yours.
On the remote LXD server, run the following. Please change mypassword to something really long and unpredictable.

# lxc config set core.https_address [::]:8443
# lxc config set core.trust_password Foxconn123
On the local system, run the following. You will be prompted to type the password that you configured on the LXD server earlier. myserver is just a mnemonic for your remote LXD server.

# lxc remote add myserver lxd-1804
Having done that, you can now do the following. That is, the same LXD commands, but you prepend myserver: to specify the remote LXD server.

root@lxd-1804:~# lxc remote list
+-----------------+------------------------------------------+---------------+-----------+--------+--------+
|      NAME       |                   URL                    |   PROTOCOL    | AUTH TYPE | PUBLIC | STATIC |
+-----------------+------------------------------------------+---------------+-----------+--------+--------+
| images          | https://images.linuxcontainers.org       | simplestreams |           | YES    | NO     |
+-----------------+------------------------------------------+---------------+-----------+--------+--------+
| local (default) | unix://                                  | lxd           | tls       | NO     | YES    |
+-----------------+------------------------------------------+---------------+-----------+--------+--------+
| myserver        | https://lxd-1804:8443                    | lxd           | tls       | NO     | NO     |
+-----------------+------------------------------------------+---------------+-----------+--------+--------+
| ubuntu          | https://cloud-images.ubuntu.com/releases | simplestreams |           | YES    | YES    |
+-----------------+------------------------------------------+---------------+-----------+--------+--------+
| ubuntu-daily    | https://cloud-images.ubuntu.com/daily    | simplestreams |           | YES    | YES    |
+-----------------+------------------------------------------+---------------+-----------+--------+--------+
root@lxd-1804:~# lxc file push ca-certificates.crt myserver:pg01/root/      传host上的文件到pg01 container中

容器转模板
root@lxd-1804:~# lxc stop pgtpl
root@lxd-1804:~# lxc list
+--------+---------+-----------------------+-----------------------------------------------+------------+-----------+
|  NAME  |  STATE  |         IPV4          |                     IPV6                      |    TYPE    | SNAPSHOTS |
+--------+---------+-----------------------+-----------------------------------------------+------------+-----------+
| barman | RUNNING | 10.152.219.158 (eth0) | fd42:b9f1:c989:a95f:216:3eff:feca:8c62 (eth0) | PERSISTENT | 0         |
+--------+---------+-----------------------+-----------------------------------------------+------------+-----------+
| pg01   | RUNNING | 10.152.219.242 (eth0) | fd42:b9f1:c989:a95f:216:3eff:fece:1ce7 (eth0) | PERSISTENT | 0         |
+--------+---------+-----------------------+-----------------------------------------------+------------+-----------+
| pga    | RUNNING | 10.152.219.220 (eth0) | fd42:b9f1:c989:a95f:216:3eff:feb2:dcef (eth0) | PERSISTENT | 0         |
+--------+---------+-----------------------+-----------------------------------------------+------------+-----------+
| pgb    | RUNNING | 10.152.219.198 (eth0) | fd42:b9f1:c989:a95f:216:3eff:fe0e:c923 (eth0) | PERSISTENT | 0         |
+--------+---------+-----------------------+-----------------------------------------------+------------+-----------+
| pgtpl  | STOPPED |                       |                                               | PERSISTENT | 0         |
+--------+---------+-----------------------+-----------------------------------------------+------------+-----------+
root@lxd-1804:~# lxc publish pgtpl --alias pg13-tpl
Container published with fingerprint: dd4ed8c33186b3742ac5e5e9133d14630074c586d65d17a310882ab8e0d71c4f
root@lxd-1804:~# lxc image list
+-----------+--------------+--------+--------------------------------------+--------+----------+-------------------------------+
|   ALIAS   | FINGERPRINT  | PUBLIC |             DESCRIPTION              |  ARCH  |   SIZE   |          UPLOAD DATE          |
+-----------+--------------+--------+--------------------------------------+--------+----------+-------------------------------+
| centos7.6 | 3370eca8870a | no     |                                      | x86_64 | 263.74MB | Jun 29, 2019 at 11:50am (UTC) |
+-----------+--------------+--------+--------------------------------------+--------+----------+-------------------------------+
| pg13-tpl  | dd4ed8c33186 | no     |                                      | x86_64 | 246.82MB | Oct 21, 2021 at 2:17am (UTC)  |
+-----------+--------------+--------+--------------------------------------+--------+----------+-------------------------------+
|           | 6ae1c6e92017 | no     | Ubuntu 18.04 LTS server (20190627.1) | x86_64 | 177.50MB | Aug 9, 2019 at 3:01am (UTC)   |
+-----------+--------------+--------+--------------------------------------+--------+----------+-------------------------------+


